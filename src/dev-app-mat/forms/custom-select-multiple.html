<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded">
  <mat-select [formControl]="control|async" [multiple]="true">
    <mat-option [value]="choice.value"
        *ngFor="let choice of instance.filteredChoices">
      {{ choice.label | translate }}
    </mat-option>
  </mat-select>
</ng-container>
<ng-template #expanded>
  <ajf-checkbox-group class="ajf-choices-container"
      [formControl]="control|async">
    <ajf-checkbox-group-item *ngFor="let choice of instance.filteredChoices"
        [value]="choice.value">
      {{ choice.label | translate }}
    </ajf-checkbox-group-item>
  </ajf-checkbox-group>
</ng-template>
